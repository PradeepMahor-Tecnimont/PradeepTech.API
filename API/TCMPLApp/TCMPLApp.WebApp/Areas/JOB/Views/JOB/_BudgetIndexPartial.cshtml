@model TCMPLApp.WebApp.Models.BudgetIndexViewModel

@inject TCMPLApp.WebApp.Services.SharedViewLocalizer localizer

@{
    var isBudgetAttached = ViewData["IsBudget"];
}

<div class="card">

    <span ID="spanJobBudgetStatus" class="f-12 badge badge-danger" style="text-align: left"></span>

    <div class="card-toolbar">
        <div role="toolbar">
            
            @if (CurrentUserIdentity.ProfileActions.Any(p => p.ActionId == TCMPLApp.Domain.Models.JOB.JOBHelper.ActionJobUploadBudget)
                && Model.ProjectActions.Any(p => p.ActionId == TCMPLApp.Domain.Models.JOB.JOBHelper.ActionJobUploadBudget)
            )
            {
                <a title="Import budget" id="idImportExportBudget"
                   class="btn btn-outline-primary btn-sm border-white" href="#"
                   data-jqueryselector="openmodal"
                   data-modalcontainer="modalcontainer"
                   data-modalpopupwidth="rightw35"
                   data-url='@Url.Action("ImportExportBudget", "JOB", new { Area = "JOB" })'
                   data-id="@ViewBag.Projno"
                   data-modaltitle="Import budget"
                   data-modalheader="Import budget">
                    <i class="fas fa-arrow-alt-circle-up"></i>&nbsp; @localizer["Import"]
                </a>
           }
            @if (@isBudgetAttached.ToString() == "1")
            {
                <button type="button" id="btnJobmasterBudgetExport" name="btnJobmasterBudgetExport" title="Export budget"
                        class="btn btn btn-outline-success btn-sm border-white">
                    <i class="far fa-file-excel "></i>&nbsp; @localizer["Export"]
                </button>
            }
        </div>
    </div>
    <div class="card-table">
        <div class="table-responsive">
            <table id="dataTableBudget" class="table table-striped table-bordered table-responsive-lg">
                @if ((bool)@Context.Items["isMobile"] == false)
                {
                    <thead class="bg-info text-white">
                        <tr>
                            <th>@localizer[Html.DisplayNameFor(model => model.Projno)]</th>
                            <th>@localizer[Html.DisplayNameFor(model => model.Phase)]</th>
                            <th>@localizer[Html.DisplayNameFor(model => model.Yymm)]</th>
                            <th>@localizer[Html.DisplayNameFor(model => model.Costcode)]</th>
                            <th>@localizer[Html.DisplayNameFor(model => model.InitialBudget)]</th>
                            <th>@localizer[Html.DisplayNameFor(model => model.NewBudget)]</th>
                        </tr>
                    </thead>
                }
            </table>
        </div>
    </div>
</div>
