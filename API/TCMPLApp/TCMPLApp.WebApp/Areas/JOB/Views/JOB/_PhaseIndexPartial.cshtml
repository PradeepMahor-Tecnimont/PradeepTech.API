@model TCMPLApp.WebApp.Models.JobPhaseIndexViewModel

@inject TCMPLApp.WebApp.Services.SharedViewLocalizer localizer

<div class="card">    

    <span id="spanJobPhasesStatus" class="f-12 badge badge-danger" style="text-align: left"></span>

    <div class="card-toolbar">
        <div role="toolbar">
            @if (CurrentUserIdentity.ProfileActions.Any(p => p.ActionId == TCMPLApp.Domain.Models.JOB.JOBHelper.ActionJobUpdatePhases) 
            && Model.ProjectActions.Any(p => p.ActionId == TCMPLApp.Domain.Models.JOB.JOBHelper.ActionJobUpdatePhases))
            {
                <a class="btn btn-outline-primary btn-sm border-white"
                   data-jqueryselector="openmodal"
                   data-modalcontainer="modalcontainer"
                   data-modalpopupwidth="rightw35"
                   data-url='@Url.Action("PhaseCreate", "JOB", new { Area = "JOB" })'
                   data-id="@ViewBag.Projno"
                   data-modaltitle="Create job phase"
                   data-modalheader="Create job phase">
                    <i class="fas fa-plus"></i>&nbsp;@localizer["Create job phase"]
                </a>
            }
        </div>
    </div>   
    <div class="card-table">
        
        <div class="table-responsive">
            <table id="dataTablePhase" class="table table-striped table-bordered table-responsive-lg">
                @if ((bool)@Context.Items["isMobile"] == false)
                {                    
                    <thead class="bg-info text-white">
                        <tr>
                            <th></th>
                            <th>@localizer[Html.DisplayNameFor(model => model.Phase)]</th>
                            <th>@localizer[Html.DisplayNameFor(model => model.Description)]</th>
                            <th>@localizer[Html.DisplayNameFor(model => model.Tmagrp)]</th>
                            <th>@localizer[Html.DisplayNameFor(model => model.Tmagrpdesc)]</th>
                            <th>@localizer[Html.DisplayNameFor(model => model.BlockBooking)]</th>
                            <th>@localizer[Html.DisplayNameFor(model => model.BlockOt)]</th>
                            <th></th>
                        </tr>
                    </thead>
                }
            </table>
        </div>
    </div>   
</div>
