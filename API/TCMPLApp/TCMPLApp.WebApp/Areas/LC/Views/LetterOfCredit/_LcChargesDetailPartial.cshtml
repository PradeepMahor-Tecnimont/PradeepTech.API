@model TCMPLApp.WebApp.Models.LcChargesDetailsViewModel

@inject TCMPLApp.WebApp.Services.SharedViewLocalizer localizer


<div class="card-deck">
    <div class="card shadow">
        <div class="card-block">

            @if (CurrentUserIdentity.ProfileActions.Any(p => p.ActionId == TCMPLApp.Domain.Models.LC.LCHelper.ActionEditLc))
            {
                @if (Model.SendToTreasury == 1 && Model.LcStatusVal == 1)
                {
                    <div class="row">
                        <a title="" class="btn btn-outline-primary btn-sm border-none ml-2 mr-2" href="#"
                   data-jqueryselector="openmodal"
                   data-modalcontainer="modalcontainer"
                   data-modalpopupwidth="rightw50"
                   data-url='@Url.Action("LcChargesCreate", "LetterOfCredit", new { Area = "LC" })'
                   data-statichtmlsourcedivid=""
                   data-id="@Model.ApplicationId"
                   data-modaltitle="Add Lc Charges "
                   data-modalheader="Add  Lc Charges">
                            <i class="fas fa-plus"></i> Create
                        </a>
                    </div>
                    <hr />
                }
            }

            <div class="">
                <div class="bg-gray-active rounded ">
                    <table id="tbGridLcCharges" class="table table-striped table-bordered table-responsive-lg">
                        <thead class="bg-info text-white">
                            <tr role="row">
                                <th></th>
                                <th class="hidden">@localizer["AppId"]</th>
                                <th class="hidden">@localizer["LcId"]</th>
                                <th>@localizer["LC charges status"]</th>
                                <th>@localizer["Basic charges"]</th>
                                <th>@localizer["Other charges"]</th>
                                <th>@localizer["Tax"]</th>
                                <th>@localizer["Commission rate"]</th>
                                <th>@localizer["Days"]</th>
                                <th>@localizer["File"]</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var items in Model.lcChargesDataTableList)
                            {
                                <tr>
                                    <td class="align-middle text-center">
                                        @if (CurrentUserIdentity.ProfileActions.Any(p => p.ActionId == TCMPLApp.Domain.Models.LC.LCHelper.ActionEditLc))
                                        {
                                            @if (Model.SendToTreasury == 1 && Model.LcStatusVal == 1)
                                            {
                                                <button class="btn btn-outline-primary btn-sm border-none"
                                            data-jqueryselector="openmodal"
                                            data-modalcontainer="modalcontainer"
                                            data-url="@Url.Action("LcChargesEdit", "LetterOfCredit", new { Area = "LC" })"
                                            data-modalpopupwidth="rightw50"
                                            data-id="@items.ApplicationId"
                                            data-modaltitle="Edit LC charges"
                                            data-modalheader="Edit LC charges">
                                                    <i class="fas fa-edit" aria-hidden="true"></i>
                                                </button>
                                            }
                                        }
                                    </td>
                                    <td class="hidden">@items.ApplicationId</td>
                                    <td class="hidden">@items.LcKeyId</td>
                                    <td>@items.LcChargesStatusText</td>
                                    <td>@items.BasicCharges</td>
                                    <td>@items.OtherCharges</td>
                                    <td>@items.CommissionRate</td>
                                    <td>@items.Days</td>
                                    <td>@items.Tax</td>
                                    <td>
                                        @if (@items.ClintFileName != null)
                                        {
                                            <a href="#" onclick="ofbfileDownload(event, this);"
                                       data-url="@Url.Action("DownloadFile", "LetterOfCredit", new { Area = "LC" })"
                                       data-keyid="@items.ApplicationId"
                                       data-clientfilename="@items.ServerFileName">
                                                @items.ClintFileName
                                                <i class="fas fa-file-download"></i>
                                            </a>
                                        }
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
            <div id="result"></div>

        </div>
    </div>
</div>


<script>
     $(document).ready(function () {

       intDataTabletbLcCharges();

    });

    function intDataTabletbLcCharges(){
          $("#tbGridLcCharges").DataTable({
            destroy: true,
            autoWidth: false,
            pageLength: 10,
            lengthMenu: [5,10],
            processing: true,
            serverSide: false,
            stateSave: false,
            info: true,
            filter: true,
            aaSorting: [[1, 'asc']], // start to sort data in second column
            aaSorting: [[1, 'asc']], // start to sort data in second column
            pagingType:'full'
       });
    }
</script>

