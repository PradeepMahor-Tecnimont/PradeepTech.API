@model TCMPLApp.WebApp.Models.EmpGenInfoMediclaimDetailsViewModel
@inject TCMPLApp.WebApp.Services.SharedViewLocalizer localizer
<input type="hidden" asp-for="@Model.Empno" />
@{
    string isOnBehalf = ViewBag.isOnBehalf ?? NotOk;
    string urlMediclaimAdd = isOnBehalf == IsOk ? Url.Action("OnBehalfMediclaimDetailsAdd", "EmpGenInfoDetails") : Url.Action("MediclaimDetailsAdd", "EmpGenInfoDetails");

}

<div class="card-deck" style="margin-top: 10px">
    <div class="card shadow col-md-12 col-xl-12">
        <div class="app-h4 app-card-header p-2">
            @if (isOnBehalf == IsOk)
            {
                @localizer["Family Details (for MEDICLAIM) (On BeHalf)"]
            }
            else
            {
                @localizer["Family Details (for MEDICLAIM)"]
            }
        </div>
        <div class="card-body">
            <span id="spanDescriptionMediclaimStatus" class="f-12 badge badge-danger" style="text-align: left"></span>
            <div class="d-flex flex-row">
                @if (@Model.LockStatusDetailViewModel.IsMediclaimOpen == IsOk)
                {
                    @*   @if (@Model.DescripancyDetailViewModel.CanMediclaimAdd == IsOk)
                { *@
                    <a title="New Mediclaim Details" class="btn btn-outline-primary btn-sm border border-white" href="#"
                       data-jqueryselector="openmodal"
                       data-modalcontainer="modalcontainer"
                       data-modalpopupwidth="rightw35"
                       data-url=@urlMediclaimAdd
                    @*data-url='@Url.Action("MediclaimDetailsAdd", "EmpGenInfoDetails", new { Area = "EmpGenInfo" })'*@
                       data-statichtmlsourcedivid=""
                       data-id="@Model.Empno"
                       data-modaltitle="New Mediclaim Details"
                       data-modalheader="New Mediclaim Details">
                        <i class="fas fa-plus"></i> Add
                    </a>

                    @* } *@
                    @* @if (isOnBehalf != IsOk)
                    {
                        <form asp-controller="EmpGenInfoDetails"
                              asp-action="SelfDOBUpdate"
                              id="formSelfDobUpdate"
                              data-ajax="true"
                              data-ajax-method="post"
                              data-ajax-begin="onBegin(null)"
                              data-ajax-complete="onComplete(null);localScript()"
                              data-ajax-success="PostSave(data)"
                              data-ajax-failure="onError"
                              accept-charset="UTF-8">
                            <button title="Update Self DOB" class="btn btn-outline-success btn-sm border border-white"
                                    style="width:100%;float:right"
                                    data-url='@Url.Action("SelfDOBUpdate", "EmpGenInfoDetails", new { Area = "EmpGenInfo" })'>
                                @localizer["Update Self DOB"]
                            </button>
                        </form>


                    } *@
                }

            </div>
            <table id="tbMediclaimDetailsGrid" class="table table-striped table-bordered table-responsive-lg ">
                <thead class="bg-info text-white">
                    <tr>

                        <th>Name of Member</th>
                        <th>Date of Birth</th>
                        <th>Relation with employee</th>
                        <th>Occupation</th>
                        <th>Pre-Existing Diseases</th>
                        @if (@Model.LockStatusDetailViewModel.IsMediclaimOpen == "OK")
                        {
                            <th>&nbsp;</th>
                            <th>&nbsp;</th>
                        }
                    </tr>
                </thead>
            </table>
        </div>
    </div>
</div>

